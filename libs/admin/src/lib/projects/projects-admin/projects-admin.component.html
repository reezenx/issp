<mat-card class="cardWithShadow m-b-4">
  <mat-card-content>
    <div class="d-flex align-items-center">
      <mat-card-title class="m-b-0 d-flex align-items-center">
        <mat-icon class="op-5 m-r-6 m-b-0 rounded-0">
          <i-tabler name="list-details" class="icon-25 d-flex"></i-tabler>
        </mat-icon>
        <div>Projects</div>
      </mat-card-title>
      <div class="m-l-auto">
        <button mat-flat-button color="primary" (click)="addNew()">
          Add Project
        </button>
      </div>
    </div>
  </mat-card-content>
</mat-card>
<mat-card class="cardWithShadow">
  <mat-card-content class="p-0">
    <ejs-grid
      #itemsGrid
      data-test="items-grid"
      [allowExcelExport]="true"
      [allowFiltering]="true"
      [allowPaging]="true"
      [allowPdfExport]="true"
      [allowResizing]="true"
      [allowSorting]="true"
      [allowTextWrap]="true"
      [allowGrouping]="true"
      [autoFit]="true"
      [showColumnChooser]="true"
      [showColumnMenu]="true"
      [dataSource]="gridData"
      [filterSettings]="filterSettings"
      [groupSettings]="groupSettings"
      [sortSettings]="sortSettings"
      [id]="gridId"
      [loadingIndicator]="loadingIndicator"
      [pageSettings]="gridPageSettings"
      [toolbar]="toolbar"
      (toolbarClick)="toolbarClick($event)"
      (created)="created()"
    >
      <e-columns>
        <e-column headerText="Title" field="title">
          <ng-template #template let-data>
            <a
              data-test="item-link"
              [routerLink]="['/', 'admin', 'projects', data.id]"
            >
              {{ data.title }}
            </a>
          </ng-template>
        </e-column>
        <e-column
          headerText="Description"
          field="description"
          [visible]="false"
        ></e-column>
        <e-column headerText="Quantity" field="quantity">
          <ng-template #template let-data>
            {{ data.quantity }} {{ data.unit }}
          </ng-template>
        </e-column>
        <e-column headerText="Cost" field="cost">
          <ng-template #template let-data>
            {{ data.cost | number : '1.0-2' }}
          </ng-template>
        </e-column>
        <e-column headerText="ISSP" field="isspName"></e-column>
        <e-column headerText="Type" field="typeName"></e-column>
        <e-column headerText="Category" field="categoryName"></e-column>
        <e-column
          headerText="Implementation"
          field="implementationTypeName"
        ></e-column>
        <e-column headerText="Budget Type" field="budgetTypeName"></e-column>
        <e-column
          headerText="Budget Source"
          field="budgetSourceName"
        ></e-column>
        <e-column headerText="Created By" field="createdBy" [visible]="false">
        </e-column>
        <e-column headerText="Created At" field="createdAt" [visible]="false">
          <ng-template #template let-data>
            {{ data.createdAt | date : 'medium' }}
          </ng-template>
        </e-column>
        <e-column headerText="Updated By" field="updatedBy" [visible]="false">
        </e-column>
        <e-column headerText="Updated At" field="updatedAt" [visible]="false">
          <ng-template #template let-data>
            {{ data.updatedAt | date : 'medium' }}
          </ng-template>
        </e-column>
        <e-column headerText="Actions" field="actions" textAlign="center">
          <ng-template #template let-data>
            <button
              mat-icon-button
              color="primary"
              type="button"
              (click)="editItem(data.id)"
              matTooltip="Edit Category"
            >
              <mat-icon matSuffix>
                <i-tabler name="pencil" class="icon-20"></i-tabler>
              </mat-icon>
            </button>
          </ng-template>
        </e-column>
      </e-columns>
    </ejs-grid>
  </mat-card-content>
</mat-card>
